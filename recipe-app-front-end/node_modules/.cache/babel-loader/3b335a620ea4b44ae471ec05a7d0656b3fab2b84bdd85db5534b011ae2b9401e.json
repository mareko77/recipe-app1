{"ast":null,"code":"const express = require('express');\nconst bcrypt = require('bcrypt-nodejs');\nconst cors = require('cors');\nconst knex = require('knex');\nconst register = require('./controllers/register');\nconst signin = require('./controllers/signin');\nconst profile = require('./controllers/profile');\nconst recipes = require('./controllers/recipes');\nconst db = knex({\n  client: 'mysql',\n  connection: {\n    host: 'localhost',\n    user: 'root',\n    password: '',\n    database: 'recipes1'\n  }\n});\nconst app = express();\napp.use(cors());\napp.use(express.json());\n\n// Routes for registering, signing in, and fetching profiles\napp.get('/', (req, res) => {\n  res.send(db.users);\n});\napp.post('/signin', signin.handleSignin(db, bcrypt));\napp.post('/register', (req, res) => {\n  console.log(req.body);\n  register.handleRegister(req, res, db, bcrypt);\n});\napp.get('/profile/:id', (req, res) => {\n  profile.handleProfileGet(req, res, db);\n});\n\n// Routes for handling recipes\napp.post('/recipes', (req, res) => recipes.handleAddRecipe(req, res, db));\napp.get('/recipes/:userId', (req, res) => recipes.handleGetRecipes(req, res, db));\napp.delete('/recipes/:id', (req, res) => recipes.handleDeleteRecipe(req, res, db));\napp.put('/recipes/:id', (req, res) => recipes.handleUpdateRecipe(req, res, db));\n\n// Search recipes endpoint\napp.get('/recipes/search', (req, res) => {\n  const {\n    query,\n    userId\n  } = req.query;\n  db.select('*').from('recipes').where('user_id', '=', userId).andWhere(function () {\n    this.where('name', 'like', `%${query}%`).orWhere('description', 'like', `%${query}%`).orWhere('ingredients', 'like', `%${query}%`);\n  }).then(recipes => {\n    res.json(recipes);\n  }).catch(err => res.status(400).json('Error searching recipes'));\n});\napp.listen(3002, () => {\n  console.log('app is running on port 3002');\n});","map":{"version":3,"names":["express","require","bcrypt","cors","knex","register","signin","profile","recipes","db","client","connection","host","user","password","database","app","use","json","get","req","res","send","users","post","handleSignin","console","log","body","handleRegister","handleProfileGet","handleAddRecipe","handleGetRecipes","delete","handleDeleteRecipe","put","handleUpdateRecipe","query","userId","select","from","where","andWhere","orWhere","then","catch","err","status","listen"],"sources":["C:/Users/olive/OneDrive/Desktop/recipe-app/recipe-app-front-end/src/components/RecipeBox/RecipeBox.js"],"sourcesContent":["const express = require('express');\r\nconst bcrypt = require('bcrypt-nodejs');\r\nconst cors = require('cors');\r\nconst knex = require('knex');\r\n\r\nconst register = require('./controllers/register');\r\nconst signin = require('./controllers/signin');\r\nconst profile = require('./controllers/profile');\r\nconst recipes = require('./controllers/recipes');\r\n\r\nconst db = knex({\r\n  client: 'mysql',\r\n  connection: {\r\n    host: 'localhost',\r\n    user: 'root',\r\n    password: '',\r\n    database: 'recipes1',\r\n  },\r\n});\r\n\r\nconst app = express();\r\n\r\napp.use(cors());\r\napp.use(express.json());\r\n\r\n// Routes for registering, signing in, and fetching profiles\r\napp.get('/', (req, res) => { res.send(db.users) })\r\napp.post('/signin', signin.handleSignin(db, bcrypt));\r\napp.post('/register', (req, res) => { \r\n  console.log(req.body); \r\n  register.handleRegister(req, res, db, bcrypt); \r\n});\r\napp.get('/profile/:id', (req, res) => { profile.handleProfileGet(req, res, db) });\r\n\r\n// Routes for handling recipes\r\napp.post('/recipes', (req, res) => recipes.handleAddRecipe(req, res, db));\r\napp.get('/recipes/:userId', (req, res) => recipes.handleGetRecipes(req, res, db));\r\napp.delete('/recipes/:id', (req, res) => recipes.handleDeleteRecipe(req, res, db));\r\napp.put('/recipes/:id', (req, res) => recipes.handleUpdateRecipe(req, res, db));\r\n\r\n// Search recipes endpoint\r\napp.get('/recipes/search', (req, res) => {\r\n  const { query, userId } = req.query;\r\n  \r\n  db.select('*')\r\n    .from('recipes')\r\n    .where('user_id', '=', userId)\r\n    .andWhere(function() {\r\n      this.where('name', 'like', `%${query}%`)\r\n          .orWhere('description', 'like', `%${query}%`)\r\n          .orWhere('ingredients', 'like', `%${query}%`);\r\n    })\r\n    .then((recipes) => {\r\n      res.json(recipes);\r\n    })\r\n    .catch((err) => res.status(400).json('Error searching recipes'));\r\n});\r\n\r\napp.listen(3002, () => {\r\n  console.log('app is running on port 3002');\r\n});\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}