{"ast":null,"code":"import React,{Component}from'react';// import Particles from 'react-particles-js';\nimport ParticlesBg from'particles-bg';import FaceRecognition from'./components/FaceRecognition/FaceRecognition';import Navigation from'./components/Navigation/Navigation';import Signin from'./components/Signin/Signin';import Register from'./components/Register/Register';import ImageLinkForm from'./components/ImageLinkForm/ImageLinkForm';import Rank from'./components/Rank/Rank';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const initialState={input:'',imageUrl:'',box:{},route:'signin',isSignedIn:false,user:{id:'',name:'',email:'',entries:0,joined:''}};class App extends Component{constructor(){super();this.loadUser=data=>{this.setState({user:{id:data.id,name:data.name,email:data.email,entries:data.entries,joined:data.joined}});};this.calculateFaceLocation=data=>{const clarifaiFace=data.outputs[0].data.regions[0].region_info.bounding_box;const image=document.getElementById('inputimage');const width=Number(image.width);const height=Number(image.height);return{leftCol:clarifaiFace.left_col*width,topRow:clarifaiFace.top_row*height,rightCol:width-clarifaiFace.right_col*width,bottomRow:height-clarifaiFace.bottom_row*height};};this.displayFaceBox=box=>{this.setState({box:box});};this.onInputChange=event=>{this.setState({input:event.target.value});};this.onButtonSubmit=()=>{this.setState({imageUrl:this.state.input});fetch('http://localhost:3002/imageurl',{method:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify({input:this.state.input})}).then(response=>response.json()).then(response=>{if(response){fetch('http://localhost:3002/image',{method:'put',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:this.state.user.id})}).then(response=>response.json()).then(count=>{this.setState(Object.assign(this.state.user,{entries:count}));}).catch(console.log);}this.displayFaceBox(this.calculateFaceLocation(response));}).catch(err=>console.log(err));};this.onRouteChange=route=>{if(route==='signout'){this.setState(initialState);}else if(route==='home'){this.setState({isSignedIn:true});}this.setState({route:route});};this.state=initialState;}render(){const{isSignedIn,imageUrl,route,box}=this.state;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(ParticlesBg,{type:\"cobweb\",bg:true}),/*#__PURE__*/_jsx(Navigation,{isSignedIn:isSignedIn,onRouteChange:this.onRouteChange}),route==='home'?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Rank,{name:this.state.user.name,entries:this.state.user.entries}),/*#__PURE__*/_jsx(ImageLinkForm,{onInputChange:this.onInputChange,onButtonSubmit:this.onButtonSubmit}),/*#__PURE__*/_jsx(FaceRecognition,{box:box,imageUrl:imageUrl})]}):route==='signin'?/*#__PURE__*/_jsx(Signin,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}):/*#__PURE__*/_jsx(Register,{loadUser:this.loadUser,onRouteChange:this.onRouteChange})]});}}export default App;","map":{"version":3,"names":["React","Component","ParticlesBg","FaceRecognition","Navigation","Signin","Register","ImageLinkForm","Rank","jsx","_jsx","jsxs","_jsxs","initialState","input","imageUrl","box","route","isSignedIn","user","id","name","email","entries","joined","App","constructor","loadUser","data","setState","calculateFaceLocation","clarifaiFace","outputs","regions","region_info","bounding_box","image","document","getElementById","width","Number","height","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","displayFaceBox","onInputChange","event","target","value","onButtonSubmit","state","fetch","method","headers","body","JSON","stringify","then","response","json","count","Object","assign","catch","console","log","err","onRouteChange","render","className","children","type","bg"],"sources":["C:/Users/olive/face-detection/smart-brain-master/src/App.js"],"sourcesContent":["import React, { Component } from 'react';\n// import Particles from 'react-particles-js';\nimport ParticlesBg from 'particles-bg'\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition';\nimport Navigation from './components/Navigation/Navigation';\nimport Signin from './components/Signin/Signin';\nimport Register from './components/Register/Register';\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm';\nimport Rank from './components/Rank/Rank';\nimport './App.css';\n\nconst initialState = {\n  input: '',\n  imageUrl: '',\n  box: {},\n  route: 'signin',\n  isSignedIn: false,\n  user: {\n    id: '',\n    name: '',\n    email: '',\n    entries: 0,\n    joined: ''\n  }\n}\n\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = initialState;\n  }\n\n  loadUser = (data) => {\n    this.setState({user: {\n      id: data.id,\n      name: data.name,\n      email: data.email,\n      entries: data.entries,\n      joined: data.joined\n    }})\n  }\n\n  calculateFaceLocation = (data) => {\n    const clarifaiFace = data.outputs[0].data.regions[0].region_info.bounding_box;\n    const image = document.getElementById('inputimage');\n    const width = Number(image.width);\n    const height = Number(image.height);\n    return {\n      leftCol: clarifaiFace.left_col * width,\n      topRow: clarifaiFace.top_row * height,\n      rightCol: width - (clarifaiFace.right_col * width),\n      bottomRow: height - (clarifaiFace.bottom_row * height)\n    }\n  }\n\n  displayFaceBox = (box) => {\n    this.setState({box: box});\n  }\n\n  onInputChange = (event) => {\n    this.setState({input: event.target.value});\n  }\n\n  onButtonSubmit = () => {\n    this.setState({imageUrl: this.state.input});\n      fetch('http://localhost:3002/imageurl', {\n        method: 'post',\n        headers: {'Content-Type': 'application/json'},\n        body: JSON.stringify({\n          input: this.state.input\n        })\n      })\n      .then(response => response.json())\n      .then(response => {\n        if (response) {\n          fetch('http://localhost:3002/image', {\n            method: 'put',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({\n              id: this.state.user.id\n            })\n          })\n            .then(response => response.json())\n            .then(count => {\n              this.setState(Object.assign(this.state.user, { entries: count}))\n            })\n            .catch(console.log)\n\n        }\n        this.displayFaceBox(this.calculateFaceLocation(response))\n      })\n      .catch(err => console.log(err));\n  }\n\n  onRouteChange = (route) => {\n    if (route === 'signout') {\n      this.setState(initialState)\n    } else if (route === 'home') {\n      this.setState({isSignedIn: true})\n    }\n    this.setState({route: route});\n  }\n\n  render() {\n    const { isSignedIn, imageUrl, route, box } = this.state;\n    return (\n      <div className=\"App\">\n        <ParticlesBg type=\"cobweb\" bg={true} />\n        <Navigation isSignedIn={isSignedIn} onRouteChange={this.onRouteChange} />\n        { route === 'home'\n          ? <div>\n              <Rank\n                name={this.state.user.name}\n                entries={this.state.user.entries}\n              />\n              <ImageLinkForm\n                onInputChange={this.onInputChange}\n                onButtonSubmit={this.onButtonSubmit}\n              />\n              <FaceRecognition box={box} imageUrl={imageUrl} />\n            </div>\n          : (\n             route === 'signin'\n             ? <Signin loadUser={this.loadUser} onRouteChange={this.onRouteChange}/>\n             : <Register loadUser={this.loadUser} onRouteChange={this.onRouteChange}/>\n            )\n        }\n      </div>\n    );\n  }\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}